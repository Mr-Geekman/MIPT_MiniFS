# MiniFS

Модель файловой системы, работающая в одном файле, использующая клиент-серверную архитектуру. Требования к задаче можно прочитать в `reference/Task2.pdf`.

## Требования

1. Linux
2. Наличие программы `/usr/bin/realpath`, обладающей флагом -m.
3. Созданная директория `/run/minifs` для хранения файлов исполнения демона.

## Сборка
```bash
make all
```

## Характеристики
1. Размер блока: 4096 байт.
2. Количество блоков: 2^16 = 65536.
3. Размер: примерно 250 МБ.
4. Максимальная длина пути: как и в Linux.
5. Максимальное имя файла: 40 символов (char).
6. Поддерживается косвенная адресация.


## Управление

Сначала надо запустить демона (программа server). Для этого могут понадобиться рут-права. Дело в том, что демон пишет в файлы, находящиеся в директории /run, для чего обычных привилегий не хватает.

Ниже изложены команды для клиента (программа client).

1. Форматирование.
```bash
client init
```

2. Создание файла/каталога

```bash
client create file "/documents/new_file.txt"
client create dir "/documents/new_dir"
```

3. Чтение файла/каталога, результат попадает на стандартный поток вывода
```bash
client read file "/documents/new_file.txt"
client read dir "/documents/new_dir"
```
При выводе директории сначала печатается маркер того директория это или файл, inode файла, размер файла или количество элементов в директории, имя файла.

4. Удаление файла/каталога, для удаления каталог должен быть пустым
```bash
client delete file "/documents/new_file.txt"
client delete dir "/documents/new_dir"
```

5. Запись файла, осуществляется со стаднартного потока ввода, перед выполнением операции предыдущее содержимое файла стирается
```bash
client write "/documents/new_file.txt"
```

Соответственно, если вы хотите сохранить файл из MiniFS себе на диск, то нужно запустить команду
```bash
client read "/documents/new_file.txt" > my_file.txt
```
